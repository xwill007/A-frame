<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Primera Escena VR</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="componentes/vr-formulario-registro/vr-formulario-registro.js"></script>
    <script src="componentes/vr-formulario-login/vr-formulario-login.js"></script>
    <script src="componentes/vr-lista-canciones/vr-lista-canciones.js"></script>
    <script src="componentes/karaoke-vr/karaoke-vr.js"></script>
    <!-- Componente para mostrar iframes de YouTube en A-Frame -->
    <script src="https://unpkg.com/aframe-htmlembed-component/dist/aframe-htmlembed-component.min.js"></script>
    <script src="componentes/visor-cancion-vr/visor-cancion-vr.js"></script>
    <script src="index.js"></script>
</head>
<body>
    <!-- Selector de color para el cubo -->
    <div style="position: absolute; top: 10px; left: 10px; z-index: 1; background: rgba(255,255,255,0.8); padding: 5px; border-radius: 4px;">
        <label for="colorPicker" style="font-family: sans-serif; font-size: 14px; color: #000;">Selecciona color:</label>
        <input type="color" id="colorPicker" value="#ff0000" />
    </div>

    <a-scene background="color: #ECECEC">
        <!-- Cielo con nubes -->
        <a-sky src="imagenes/cielo.jpg" rotation="0 -90 0"></a-sky>
        <!-- Plano de piso -->
        <a-circle position="0 0 0" rotation="-90 0 0" radius="20" segments="64"
                  material="src: imagenes/pasto.jpg; repeat: 2 3"></a-circle>

        <!-- Árboles alrededor del escenario -->
        <a-entity id="trees">

            <!-- Árbol 1 -->
            <a-entity position="-5 0.5 -5">
                <a-cylinder height="2" radius="0.2" color="#8B4513"></a-cylinder>
                <a-cone height="3" radius-bottom="1" color="#228B22" position="0 1.5 0"></a-cone>
            </a-entity>

            <!-- Árbol 2 -->
            <a-entity position="5 0.5 -5">
                <a-cylinder height="2" radius="0.2" color="#8B4513"></a-cylinder>
                <a-cone height="3" radius-bottom="1" color="#228B22" position="0 1.5 0"></a-cone>
            </a-entity>

            <!-- Árbol 3 -->
            <a-entity position="0 0.5 -10">
                <a-cylinder height="2" radius="0.2" color="#8B4513"></a-cylinder>
                <a-cone height="3" radius-bottom="1" color="#228B22" position="0 1.5 0"></a-cone>
            </a-entity>

        </a-entity>

        <!-- Iluminación mejorada -->
        <a-entity light="type: ambient; color: #BBB; intensity: 0.8"></a-entity>
        <a-entity light="type: directional; position: 0 1 1; intensity: 0.8"></a-entity>
        <a-entity light="type: point; position: 2 2 2; intensity: 0.5"></a-entity>
        
        <!-- Cámara con cursor -->
        <a-entity camera look-controls wasd-controls position="0 2.0 9">
            <a-cursor 
                position="0 0 -1"
                geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                material="color: white; shader: flat"
                animation__click="property: scale; startEvents: click; from: 0.1 0.1 0.1; to: 1 1 1; dur: 150"
                animation__fuse="property: scale; startEvents: fusing; from: 1 1 1; to: 0.1 0.1 0.1; dur: 1500"
                raycaster="objects: .clickable"
            ></a-cursor>
        </a-entity>

        <!-- Componente VR de formulario de registro con botón integrado -->
        <a-entity 
            id="registro-vr-component" 
            formulario-registro-vr="formPosition: -4.5 6 -1.5; buttonPosition: -3 4 3; visible: false">
        </a-entity>

        <!-- Componente VR de formulario de login -->
        <a-entity 
            id="login-vr-component" 
            formulario-login-vr="formPosition: -3.0 3.5 1.5; buttonPosition: -3 1.5 3; visible: false">
        </a-entity>


        <!-- Componente VR de lista de canciones - VERSION SIMPLE -->
        <a-entity 
            id="canciones-vr-component" 
            lista-canciones-vr-simple="buttonPosition: 6 1.5 3; listPosition: 6 4 .5 -3">
        </a-entity>

        <!-- Visor de canción VR (video y letra) -->
        <a-entity 
            id="visor-cancion-vr" 
            visor-cancion-vr="visible: false"
            position="0 2.5 -2">
        </a-entity>

        <!-- Karaoke VR para pruebas directas con parámetros de video local y lista de videos -->
        <a-entity 
            id="karaoke-vr-component" 
            karaoke-vr="videoPath: ./videos/mi-video.mp4; videoWidth: 9; videoHeight: 6; videoList: GangstasParadise.mp4,itsMyLife.mp4,StandByMe.mp4"
            position="0 2.5 3"> <!-- Ajustar posición para mayor visibilidad -->
        </a-entity>

    </a-scene>
</body>
</html>
